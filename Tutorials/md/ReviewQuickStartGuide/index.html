
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A scalable framework for automated processing of highly multiplexed tissue images">
      
      
        <meta name="author" content="Ajit Johnson Nirmal">
      
      
      
        <link rel="prev" href="../../../Functions/addPredictions/">
      
      
        <link rel="next" href="../DownloadTutorialData/">
      
      
      <link rel="icon" href="../../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.8">
    
    
      
        <title>Reviewer Quick Start Guide - CELL SPOTTER (CSPOT)</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#review-quick-start-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="CELL SPOTTER (CSPOT)" class="md-header__button md-logo" aria-label="CELL SPOTTER (CSPOT)" data-md-component="logo">
      
  <img src="../../../assets/favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CELL SPOTTER (CSPOT)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Reviewer Quick Start Guide
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/nirmalLab/cspot/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../Getting%20Started/" class="md-tabs__link">
        
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../Functions/generateThumbnails/" class="md-tabs__link">
          
  
  CSPOT Functions

        </a>
      </li>
    
  

    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  Tutorials

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="CELL SPOTTER (CSPOT)" class="md-nav__button md-logo" aria-label="CELL SPOTTER (CSPOT)" data-md-component="logo">
      
  <img src="../../../assets/favicon.png" alt="logo">

    </a>
    CELL SPOTTER (CSPOT)
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/nirmalLab/cspot/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Getting%20Started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CSPOT Functions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            CSPOT Functions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Build CSPOT Model
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Build CSPOT Model
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Functions/generateThumbnails/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    generateThumbnails
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Functions/cloneFolder/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cloneFolder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Functions/generateTrainTestSplit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    generateTrainTestSplit
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Functions/csTrain/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    csTrain
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Run CSPOT Algorithm
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Run CSPOT Algorithm
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Functions/csPipeline/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    csPipeline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Functions/csPredict/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    csPredict
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Functions/generateCSScore/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    generateCSScore
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Functions/csObject/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    csObject
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Functions/cspot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cspot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Functions/mergecsObject/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mergecsObject
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Phenotype cells
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Phenotype cells
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Functions/csPhenotype/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    csPhenotype
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Helper Functions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Helper Functions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Functions/csExport/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    csExport
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Functions/scatterPlot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    scatterPlot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Functions/addPredictions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    addPredictions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Reviewer Quick Start Guide
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Reviewer Quick Start Guide
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-started-with-cspot" class="md-nav__link">
    <span class="md-ellipsis">
      üêä Getting Started with CSPOT
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-new-conda-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Create a new conda environment
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Create a new conda environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-a-cspot-model" class="md-nav__link">
    <span class="md-ellipsis">
      Build a CSPOT Model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-this-to-your-local-directory-where-the-example-data-has-been-saved" class="md-nav__link">
    <span class="md-ellipsis">
      Change this to your local directory where the example data has been saved
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-generate-thumbnails-for-training-data" class="md-nav__link">
    <span class="md-ellipsis">
      Step-1: Generate Thumbnails for Training Data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-generate-masks-for-training-data" class="md-nav__link">
    <span class="md-ellipsis">
      Step-2: Generate Masks for Training Data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-train-the-cspot-model" class="md-nav__link">
    <span class="md-ellipsis">
      Step-3: Train the CSPOT Model
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-predict-on-a-new-image" class="md-nav__link">
    <span class="md-ellipsis">
      Step-4: Predict on a new image
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualize-the-results" class="md-nav__link">
    <span class="md-ellipsis">
      Visualize the results
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-cspot-phenotyping" class="md-nav__link">
    <span class="md-ellipsis">
      Step-5: CSPOT Phenotyping
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DownloadTutorialData/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Download Tutorial Data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../InstallationandSetUp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation and Set Up
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BuildCSPOTModel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Build CSPOT Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RunCSPOTAlgorithm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run CSPOT Algorithm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PhenotypeCells/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Phenotype Cells
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../HelperFunctions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Helper Functions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RunCSPOTwithDocker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run CSPOT with Docker
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-started-with-cspot" class="md-nav__link">
    <span class="md-ellipsis">
      üêä Getting Started with CSPOT
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-new-conda-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Create a new conda environment
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Create a new conda environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-a-cspot-model" class="md-nav__link">
    <span class="md-ellipsis">
      Build a CSPOT Model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-this-to-your-local-directory-where-the-example-data-has-been-saved" class="md-nav__link">
    <span class="md-ellipsis">
      Change this to your local directory where the example data has been saved
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-generate-thumbnails-for-training-data" class="md-nav__link">
    <span class="md-ellipsis">
      Step-1: Generate Thumbnails for Training Data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-generate-masks-for-training-data" class="md-nav__link">
    <span class="md-ellipsis">
      Step-2: Generate Masks for Training Data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-train-the-cspot-model" class="md-nav__link">
    <span class="md-ellipsis">
      Step-3: Train the CSPOT Model
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-predict-on-a-new-image" class="md-nav__link">
    <span class="md-ellipsis">
      Step-4: Predict on a new image
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualize-the-results" class="md-nav__link">
    <span class="md-ellipsis">
      Visualize the results
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-cspot-phenotyping" class="md-nav__link">
    <span class="md-ellipsis">
      Step-5: CSPOT Phenotyping
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="review-quick-start-guide">üéØ Review: Quick Start Guide<a class="headerlink" href="#review-quick-start-guide" title="Permanent link">&para;</a></h1>
<h2 id="getting-started-with-cspot">üêä Getting Started with CSPOT<a class="headerlink" href="#getting-started-with-cspot" title="Permanent link">&para;</a></h2>
<p>Kindly note that <strong>CSPOT is not a plug-and-play solution</strong>. It's a framework that requires significant upfront investment of time from potential users for training and validating deep learning models, which can then be utilized in a plug-and-play manner for processing large volumes of similar multiplexed imaging data.  </p>
<p>Before we set up CSPOT, we highly recommend using a environment manager like Conda. Using an environment manager like Conda allows you to create and manage isolated environments with specific package versions and dependencies. </p>
<p><strong>Download and Install the right <a href="https://docs.conda.io/en/latest/miniconda.html">conda</a> based on the opertating system that you are using</strong></p>
<h2 id="create-a-new-conda-environment"><strong>Create a new conda environment</strong><a class="headerlink" href="#create-a-new-conda-environment" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code># use the terminal (mac/linux) and anaconda promt (windows) to run the following command
conda create --name cspot -y python=3.9
conda activate cspot
</code></pre></div>
<p><strong>Install <code>cspot</code> within the conda environment.</strong></p>
<div class="highlight"><pre><span></span><code>pip install cspot
pip install notebook

# after it is installed open the notebook by typing the following in the terminal:
jupyter notebook
</code></pre></div>
<h3 id="build-a-cspot-model">Build a CSPOT Model<a class="headerlink" href="#build-a-cspot-model" title="Permanent link">&para;</a></h3>
<p>Please keep in mind that the <a href="https://doi.org/10.7910/DVN/C45JWT">sample data</a> is used for demonstration purposes only and has been simplified and reduced in size. It is solely intended for educational purposes on how to execute <code>cspot</code> and will not yeild any meaningful results.</p>
<hr>

<div class="highlight"><pre><span></span><code><span class="o">%%</span><span class="n">time</span>
<span class="c1"># import packages in jupyter notebook (not needed for command line interface users)</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">cspot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">cs</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>WARNING:tensorflow:From /Users/aj/miniconda3/envs/cspot/lib/python3.9/site-packages/tensorflow/python/compat/v2_compat.py:107: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
Instructions for updating:
non-resource variables are not supported in the long term
CPU times: user 3.8 s, sys: 2.74 s, total: 6.54 s
Wall time: 3.37 s
</code></pre></div>
<p><strong>CSPOT auto generates subfolders and so always set a single folder as <code>projectDir</code> and cspot will use that for all subsequent steps.</strong><br />
In this case we will set the downloaded sample data as our <code>projectDir</code>. My sample data is on my desktop as seen below.</p>
<h3 id="change-this-to-your-local-directory-where-the-example-data-has-been-saved">Change this to your local directory where the example data has been saved<a class="headerlink" href="#change-this-to-your-local-directory-where-the-example-data-has-been-saved" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">projectDir</span> <span class="o">=</span> <span class="s1">&#39;/Users/aj/Downloads/cspotExampleData&#39;</span> <span class="c1">#CHANGE</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="o">%%</span><span class="n">time</span>
<span class="c1"># set the working directory &amp; set paths to the example data</span>
<span class="n">imagePath</span> <span class="o">=</span> <span class="n">projectDir</span> <span class="o">+</span> <span class="s1">&#39;/image/exampleImage.tif&#39;</span>
<span class="n">spatialTablePath</span> <span class="o">=</span> <span class="n">projectDir</span> <span class="o">+</span> <span class="s1">&#39;/quantification/exampleSpatialTable.csv&#39;</span>
<span class="n">markerChannelMapPath</span> <span class="o">=</span> <span class="n">projectDir</span> <span class="o">+</span> <span class="s1">&#39;/markers.csv&#39;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>CPU times: user 2 ¬µs, sys: 0 ns, total: 2 ¬µs
Wall time: 2.86 ¬µs
</code></pre></div>
<h2 id="step-1-generate-thumbnails-for-training-data">Step-1: Generate Thumbnails for Training Data<a class="headerlink" href="#step-1-generate-thumbnails-for-training-data" title="Permanent link">&para;</a></h2>
<p>The first step would be to train a model to recognize the marker of interest. In this example the data contains 11 channels <code>DNA1, ECAD, CD45, CD4, CD3D, CD8A, CD45R, KI67</code> and as we are not interested in training a model to recognize DNA or background (<code>DNA1</code>), we will only need to generate training data for  <code>ECAD1, CD45, CD4, CD3D, CD8A &amp; KI67</code>. However for proof of concept, let us just train a model for <code>ECAD</code> and <code>CD3D</code>.</p>
<p>To do so, the first step is to create examples of <code>postive</code> and <code>negative</code> examples for each marker of interest. To facilitate this process, we can use the <code>generateThumbnails</code> function in <code>CSPOT</code>. Under the hood the function auto identifies the cells that has high and low expression of the marker of interest and cuts out small thumbnails from the image.</p>
<div class="highlight"><pre><span></span><code><span class="o">%%</span><span class="n">time</span>
<span class="n">cs</span><span class="o">.</span><span class="n">generateThumbnails</span> <span class="p">(</span> <span class="n">spatialTablePath</span><span class="o">=</span><span class="n">spatialTablePath</span><span class="p">,</span> 
                        <span class="n">imagePath</span><span class="o">=</span><span class="n">imagePath</span><span class="p">,</span> 
                        <span class="n">markerChannelMapPath</span><span class="o">=</span><span class="n">markerChannelMapPath</span><span class="p">,</span>
                        <span class="n">markers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ECAD&quot;</span><span class="p">,</span> <span class="s2">&quot;CD3D&quot;</span><span class="p">],</span> 
                        <span class="n">markerColumnName</span><span class="o">=</span><span class="s1">&#39;marker&#39;</span><span class="p">,</span>
                        <span class="n">channelColumnName</span><span class="o">=</span><span class="s1">&#39;channel&#39;</span><span class="p">,</span>
                        <span class="n">transformation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
                        <span class="n">maxThumbnails</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> 
                        <span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                        <span class="n">localNorm</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
                        <span class="n">globalNorm</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">x_coordinate</span><span class="o">=</span><span class="s1">&#39;X_centroid&#39;</span><span class="p">,</span> 
                        <span class="n">y_coordinate</span><span class="o">=</span><span class="s1">&#39;Y_centroid&#39;</span><span class="p">,</span>
                        <span class="n">percentiles</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">88</span><span class="p">,</span> <span class="mi">98</span><span class="p">],</span> 
                        <span class="n">windowSize</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span>
                        <span class="n">projectDir</span><span class="o">=</span><span class="n">projectDir</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Processing Marker: ECAD
Processing Marker: CD3D
Thumbnails have been generated, head over to &quot;/Users/aj/Downloads/cspotExampleData/CSPOT/Thumbnails&quot; to view results
CPU times: user 2.83 s, sys: 6.38 s, total: 9.21 s
Wall time: 1.19 s
</code></pre></div>
<p><strong>The output from the above function will be stored under <code>CSPOT/Thumbnails/</code>.</strong>  </p>
<p>Now that the thumbnails are generated, one would manually go through the <code>TruePos</code> folder and <code>TrueNeg</code> folder and move files around as necessary. If there are any truly negative thumbnails in the <code>TruePos</code> folder, move it to <code>PosToNeg</code> folder. Similarly, if there are any truly positive thumbnails in <code>TrueNeg</code> folder, move it to <code>NegToPos</code> folder. You will often notice that imaging artifacts are captured in the <code>TruePos</code> folder and there will also likely be a number of true positives in the <code>TrueNeg</code> folder as the field of view (64x64) is larger than what the program used to identify those thumbnails (just the centroids of single cells at the center of that thumbnail).    </p>
<p>While you are manually sorting the postives and negative thumbnails, please keep in mind that you are looking for high-confident positives and high-confident negatives. It is absolutely okay to delete off majority of the thumbnails that you are not confident about. This infact makes it easy and fast as you are looking to only keep only thumbnails that are readily sortable.  </p>
<p>Lastly, I generally use a whole slide image to generate these thumbnails as there will be enough regions with high expression and no expression of the marker of interest. If you look at the thumbnails of this dummy example, you will notice that most thumbnails of <code>TrueNeg</code> for <code>ECAD</code> does contain some level of <code>ECAD</code> as there is not enough regions to sample from. </p>
<h2 id="step-2-generate-masks-for-training-data">Step-2: Generate Masks for Training Data<a class="headerlink" href="#step-2-generate-masks-for-training-data" title="Permanent link">&para;</a></h2>
<p>To train the deep learning model, in addition to the raw thumbnails a mask is needed. The mask lets the model know where the cell is located. Ideally one would manually draw on the thumbnails to locate where the positive cells are, however for the pupose of scalability we will use automated approaches to generate the Mask for us. The following function will generate the mask and split the data into <code>training, validation and test</code> that can be directly fed into the deep learning algorithm.</p>
<div class="highlight"><pre><span></span><code><span class="o">%%</span><span class="n">time</span>
<span class="n">thumbnailFolder</span> <span class="o">=</span> <span class="p">[</span><span class="n">projectDir</span> <span class="o">+</span> <span class="s1">&#39;/CSPOT/Thumbnails/CD3D&#39;</span><span class="p">,</span>
                   <span class="n">projectDir</span> <span class="o">+</span> <span class="s1">&#39;/CSPOT/Thumbnails/ECAD&#39;</span><span class="p">]</span>

<span class="c1"># The function accepts the four pre-defined folders. If you had renamed them, please change it using the parameter below.</span>
<span class="c1"># If you had deleted any of the folders and are not using them, replace the folder name with `None` in the parameter.</span>
<span class="n">cs</span><span class="o">.</span><span class="n">generateTrainTestSplit</span> <span class="p">(</span> <span class="n">thumbnailFolder</span><span class="p">,</span> 
                            <span class="n">projectDir</span><span class="o">=</span><span class="n">projectDir</span><span class="p">,</span>
                            <span class="n">file_extension</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">TruePos</span><span class="o">=</span><span class="s1">&#39;TruePos&#39;</span><span class="p">,</span> <span class="n">NegToPos</span><span class="o">=</span><span class="s1">&#39;NegToPos&#39;</span><span class="p">,</span>
                            <span class="n">TrueNeg</span><span class="o">=</span><span class="s1">&#39;TrueNeg&#39;</span><span class="p">,</span> <span class="n">PosToNeg</span><span class="o">=</span><span class="s1">&#39;PosToNeg&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Processing: CD3D
Processing: ECAD
Training data has been generated, head over to &quot;/Users/aj/Downloads/cspotExampleData/CSPOT/TrainingData&quot; to view results
CPU times: user 193 ms, sys: 276 ms, total: 469 ms
Wall time: 218 ms
</code></pre></div>
<p>If you head over to <code>CSPOT/TrainingData/</code>, you will notice that each of the supplied marker above will have a folder with the associated <code>training, validataion and test</code> data that is required by the deep-learning algorithm to generate the model. </p>
<h2 id="step-3-train-the-cspot-model">Step-3: Train the CSPOT Model<a class="headerlink" href="#step-3-train-the-cspot-model" title="Permanent link">&para;</a></h2>
<p>The function trains a deep learning model for each marker in the provided training data. To train the <code>cspotModel</code>, simply direct the function to the <code>TrainingData</code> folder. To train only specific models, specify the folder names using the <code>trainMarkers</code> parameter. The 'outputDir' remains constant and the program will automatically create subfolders to save the trained models.</p>
<div class="highlight"><pre><span></span><code><span class="o">%%</span><span class="n">time</span>
<span class="n">trainingDataPath</span> <span class="o">=</span> <span class="n">projectDir</span> <span class="o">+</span> <span class="s1">&#39;/CSPOT/TrainingData&#39;</span>

<span class="n">cs</span><span class="o">.</span><span class="n">csTrain</span><span class="p">(</span><span class="n">trainingDataPath</span><span class="o">=</span><span class="n">trainingDataPath</span><span class="p">,</span>
               <span class="n">projectDir</span><span class="o">=</span><span class="n">projectDir</span><span class="p">,</span>
               <span class="n">trainMarkers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">artefactPath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">imSize</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span>
               <span class="n">nChannels</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
               <span class="n">nClasses</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
               <span class="n">nExtraConvs</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
               <span class="n">nLayers</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
               <span class="n">featMapsFact</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
               <span class="n">downSampFact</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
               <span class="n">ks</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
               <span class="n">nOut0</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
               <span class="n">stdDev0</span><span class="o">=</span><span class="mf">0.03</span><span class="p">,</span>
               <span class="n">batchSize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
               <span class="n">epochs</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>WARNING:tensorflow:From /Users/aj/miniconda3/envs/cspot/lib/python3.9/site-packages/keras/src/layers/normalization/batch_normalization.py:883: _colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.
Instructions for updating:
Colocations handled automatically by placer.
/Users/aj/Downloads/cspotExampleData/CSPOT/TrainingData/CD3D/training
Training for 8 steps
Found 124 training images
Found 42 validation images
Found 41 test images
Of these, 0 are artefact training images
 and  0 artefact validation images
Using 0 and 1 for mean and standard deviation.
saving data
saving data
Using 15.0 and 0.0 for global max and min intensities.
Class balance ratio is 15.352093476144109


/Users/aj/miniconda3/envs/cspot/lib/python3.9/site-packages/cspot/UNet.py:137: UserWarning: `tf.layers.batch_normalization` is deprecated and will be removed in a future version. Please use `tf.keras.layers.BatchNormalization` instead. In particular, `tf.control_dependencies(tf.GraphKeys.UPDATE_OPS)` should not be used (consult the `tf.keras.layers.BatchNormalization` documentation).
  bn = tf.nn.leaky_relu(tf.layers.batch_normalization(c00+shortcut, training=UNet2D.tfTraining))
/Users/aj/miniconda3/envs/cspot/lib/python3.9/site-packages/cspot/UNet.py:159: UserWarning: `tf.layers.batch_normalization` is deprecated and will be removed in a future version. Please use `tf.keras.layers.BatchNormalization` instead. In particular, `tf.control_dependencies(tf.GraphKeys.UPDATE_OPS)` should not be used (consult the `tf.keras.layers.BatchNormalization` documentation).
  lbn = tf.nn.leaky_relu(tf.layers.batch_normalization(
/Users/aj/miniconda3/envs/cspot/lib/python3.9/site-packages/cspot/UNet.py:162: UserWarning: `tf.layers.dropout` is deprecated and will be removed in a future version. Please use `tf.keras.layers.Dropout` instead.
  return tf.layers.dropout(lbn, 0.15, training=UNet2D.tfTraining)
/Users/aj/miniconda3/envs/cspot/lib/python3.9/site-packages/cspot/UNet.py:224: UserWarning: `tf.layers.batch_normalization` is deprecated and will be removed in a future version. Please use `tf.keras.layers.BatchNormalization` instead. In particular, `tf.control_dependencies(tf.GraphKeys.UPDATE_OPS)` should not be used (consult the `tf.keras.layers.BatchNormalization` documentation).
  tf.layers.batch_normalization(tf.nn.conv2d(cc, luXWeights2, strides=[1, 1, 1, 1], padding=&#39;SAME&#39;),
/Users/aj/miniconda3/envs/cspot/lib/python3.9/site-packages/cspot/UNet.py:245: UserWarning: `tf.layers.batch_normalization` is deprecated and will be removed in a future version. Please use `tf.keras.layers.BatchNormalization` instead. In particular, `tf.control_dependencies(tf.GraphKeys.UPDATE_OPS)` should not be used (consult the `tf.keras.layers.BatchNormalization` documentation).
  return tf.layers.batch_normalization(


WARNING:tensorflow:From /Users/aj/miniconda3/envs/cspot/lib/python3.9/site-packages/tensorflow/python/util/dispatch.py:1176: to_int32 (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.cast` instead.
WARNING:tensorflow:From /Users/aj/miniconda3/envs/cspot/lib/python3.9/site-packages/tensorflow/python/util/dispatch.py:1176: to_float (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.cast` instead.
WARNING:tensorflow:From /Users/aj/miniconda3/envs/cspot/lib/python3.9/site-packages/tensorflow/python/util/dispatch.py:1176: calling reduce_min_v1 (from tensorflow.python.ops.math_ops) with keep_dims is deprecated and will be removed in a future version.
Instructions for updating:
keep_dims is deprecated, use keepdims instead
WARNING:tensorflow:From /Users/aj/miniconda3/envs/cspot/lib/python3.9/site-packages/tensorflow/python/util/dispatch.py:1176: calling reduce_max_v1 (from tensorflow.python.ops.math_ops) with keep_dims is deprecated and will be removed in a future version.
Instructions for updating:
keep_dims is deprecated, use keepdims instead
WARNING:tensorflow:From /Users/aj/miniconda3/envs/cspot/lib/python3.9/site-packages/tensorflow/python/util/dispatch.py:1176: div (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Deprecated in favor of operator or tf.math.divide.
step 00000, e: 0.526497, epoch: 1
Model saved in file: /Users/aj/Downloads/cspotExampleData/CSPOT/cspotModel/CD3D/model.ckpt
step 00001, e: 0.480866, epoch: 1
step 00002, e: 0.533251, epoch: 1
step 00003, e: 0.519985, epoch: 1
step 00004, e: 0.501891, epoch: 1
step 00005, e: 0.507230, epoch: 1
step 00006, e: 0.465878, epoch: 2
step 00007, e: 0.505098, epoch: 2
saving data
loading data
INFO:tensorflow:Restoring parameters from /Users/aj/Downloads/cspotExampleData/CSPOT/cspotModel/CD3D/model.ckpt
Model restored.
/Users/aj/Downloads/cspotExampleData/CSPOT/TrainingData/ECAD/training
Training for 9 steps
Found 142 training images
Found 48 validation images
Found 47 test images
Of these, 0 are artefact training images
 and  0 artefact validation images
Using 0 and 1 for mean and standard deviation.
saving data
saving data
Using 76.0 and 0.0 for global max and min intensities.
Class balance ratio is 5.747231179027057
step 00000, e: 0.516712, epoch: 1
Model saved in file: /Users/aj/Downloads/cspotExampleData/CSPOT/cspotModel/ECAD/model.ckpt
step 00001, e: 0.512037, epoch: 1
step 00002, e: 0.517852, epoch: 1
step 00003, e: 0.558351, epoch: 1
step 00004, e: 0.508853, epoch: 1
step 00005, e: 0.547349, epoch: 1
step 00006, e: 0.506477, epoch: 1
step 00007, e: 0.537210, epoch: 2
step 00008, e: 0.486268, epoch: 2
saving data
loading data
INFO:tensorflow:Restoring parameters from /Users/aj/Downloads/cspotExampleData/CSPOT/cspotModel/ECAD/model.ckpt
Model restored.
CSPOT Models have been generated, head over to &quot;/Users/aj/Downloads/cspotExampleData/CSPOT/cspotModel&quot; to view results
CPU times: user 8.7 s, sys: 1.77 s, total: 10.5 s
Wall time: 3.72 s
</code></pre></div>
<h2 id="step-4-predict-on-a-new-image">Step-4: Predict on a new image<a class="headerlink" href="#step-4-predict-on-a-new-image" title="Permanent link">&para;</a></h2>
<p>Now that the model is trained, we can predict the expression of the trained markers on a new image that the model has not seen before. </p>
<div class="highlight"><pre><span></span><code><span class="o">%%</span><span class="n">time</span>
<span class="c1"># cspotpredict related paths</span>
<span class="n">csModelPath</span> <span class="o">=</span> <span class="n">projectDir</span> <span class="o">+</span> <span class="s1">&#39;/manuscriptModels/&#39;</span>
<span class="n">segmentationPath</span> <span class="o">=</span> <span class="n">projectDir</span> <span class="o">+</span> <span class="s1">&#39;/segmentation/exampleSegmentationMask.tif&#39;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>CPU times: user 1e+03 ns, sys: 1 ¬µs, total: 2 ¬µs
Wall time: 3.81 ¬µs
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="o">%%</span><span class="n">time</span>
<span class="c1"># Run the pipeline (For function specific parameters, check the documentation)</span>
<span class="n">cs</span><span class="o">.</span><span class="n">csPipeline</span><span class="p">(</span>   
                    <span class="c1"># parameters for cspotPredict function</span>
                    <span class="n">imagePath</span><span class="o">=</span><span class="n">imagePath</span><span class="p">,</span>
                    <span class="n">csModelPath</span><span class="o">=</span><span class="n">csModelPath</span><span class="p">,</span>
                    <span class="n">markerChannelMapPath</span><span class="o">=</span><span class="n">markerChannelMapPath</span><span class="p">,</span>

                    <span class="c1"># parameters for cspotCScore function</span>
                    <span class="n">segmentationMaskPath</span><span class="o">=</span><span class="n">segmentationPath</span><span class="p">,</span>

                    <span class="c1"># parameters for cspotObject function</span>
                    <span class="n">spatialTablePath</span><span class="o">=</span><span class="n">spatialTablePath</span><span class="p">,</span>

                    <span class="c1"># common parameters</span>
                    <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">projectDir</span><span class="o">=</span><span class="n">projectDir</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>loading data
loading data
loading data
INFO:tensorflow:Restoring parameters from /Users/aj/Downloads/cspotExampleData/manuscriptModels/ECAD/model.ckpt
Model restored.


/Users/aj/miniconda3/envs/cspot/lib/python3.9/site-packages/cspot/UNet.py:137: UserWarning: `tf.layers.batch_normalization` is deprecated and will be removed in a future version. Please use `tf.keras.layers.BatchNormalization` instead. In particular, `tf.control_dependencies(tf.GraphKeys.UPDATE_OPS)` should not be used (consult the `tf.keras.layers.BatchNormalization` documentation).
  bn = tf.nn.leaky_relu(tf.layers.batch_normalization(c00+shortcut, training=UNet2D.tfTraining))
/Users/aj/miniconda3/envs/cspot/lib/python3.9/site-packages/cspot/UNet.py:159: UserWarning: `tf.layers.batch_normalization` is deprecated and will be removed in a future version. Please use `tf.keras.layers.BatchNormalization` instead. In particular, `tf.control_dependencies(tf.GraphKeys.UPDATE_OPS)` should not be used (consult the `tf.keras.layers.BatchNormalization` documentation).
  lbn = tf.nn.leaky_relu(tf.layers.batch_normalization(
/Users/aj/miniconda3/envs/cspot/lib/python3.9/site-packages/cspot/UNet.py:162: UserWarning: `tf.layers.dropout` is deprecated and will be removed in a future version. Please use `tf.keras.layers.Dropout` instead.
  return tf.layers.dropout(lbn, 0.15, training=UNet2D.tfTraining)
/Users/aj/miniconda3/envs/cspot/lib/python3.9/site-packages/cspot/UNet.py:224: UserWarning: `tf.layers.batch_normalization` is deprecated and will be removed in a future version. Please use `tf.keras.layers.BatchNormalization` instead. In particular, `tf.control_dependencies(tf.GraphKeys.UPDATE_OPS)` should not be used (consult the `tf.keras.layers.BatchNormalization` documentation).
  tf.layers.batch_normalization(tf.nn.conv2d(cc, luXWeights2, strides=[1, 1, 1, 1], padding=&#39;SAME&#39;),
/Users/aj/miniconda3/envs/cspot/lib/python3.9/site-packages/cspot/UNet.py:245: UserWarning: `tf.layers.batch_normalization` is deprecated and will be removed in a future version. Please use `tf.keras.layers.BatchNormalization` instead. In particular, `tf.control_dependencies(tf.GraphKeys.UPDATE_OPS)` should not be used (consult the `tf.keras.layers.BatchNormalization` documentation).
  return tf.layers.batch_normalization(


Inference...
loading data
loading data
loading data
INFO:tensorflow:Restoring parameters from /Users/aj/Downloads/cspotExampleData/manuscriptModels/CD3D/model.ckpt
Model restored.
Inference...
CPU times: user 1min 10s, sys: 25.5 s, total: 1min 36s
Wall time: 15.9 s


/Users/aj/miniconda3/envs/cspot/lib/python3.9/site-packages/cspot/cspot.py:393: RuntimeWarning: invalid value encountered in divide
  below_midpoint = (below_midpoint - min_below) / range_below
</code></pre></div>
<p>Head over to <code>CSPOT/cspotOutput</code> to view results</p>
<h2 id="visualize-the-results">Visualize the results<a class="headerlink" href="#visualize-the-results" title="Permanent link">&para;</a></h2>
<p>Let us visualize the marker postivity of three markers using a helper plotting function provided within CSPOT.</p>
<div class="highlight"><pre><span></span><code><span class="o">%%</span><span class="n">time</span>
<span class="n">csObject</span> <span class="o">=</span> <span class="n">projectDir</span> <span class="o">+</span> <span class="s1">&#39;/CSPOT/cspotOutput/exampleImage_cspotPredict.ome.h5ad&#39;</span>

<span class="c1"># Plot image to console</span>
<span class="n">cs</span><span class="o">.</span><span class="n">scatterPlot</span><span class="p">(</span><span class="n">csObject</span><span class="p">,</span>
            <span class="n">markers</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ECAD&#39;</span><span class="p">,</span> <span class="s1">&#39;CD8A&#39;</span><span class="p">,</span> <span class="s1">&#39;CD45&#39;</span><span class="p">],</span>
            <span class="n">poscellsColor</span><span class="o">=</span><span class="s1">&#39;#78290f&#39;</span><span class="p">,</span>
            <span class="n">negcellsColor</span><span class="o">=</span><span class="s1">&#39;#e5e5e5&#39;</span><span class="p">,</span>
            <span class="n">s</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
            <span class="n">ncols</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
            <span class="n">dpi</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span>
            <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
            <span class="n">outputDir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">outputFileName</span><span class="o">=</span><span class="s1">&#39;cspotplot.png&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>CPU times: user 383 ms, sys: 4.62 ms, total: 388 ms
Wall time: 197 ms
</code></pre></div>
<p><img alt="png" src="../ReviewQuickStartGuide_files/ReviewQuickStartGuide_29_1.png" /></p>
<h2 id="step-5-cspot-phenotyping">Step-5: CSPOT Phenotyping<a class="headerlink" href="#step-5-cspot-phenotyping" title="Permanent link">&para;</a></h2>
<p>Assign phenotypes to each cell. Clustering data may not always be ideal, so we developed a cell type assignment algorithm that does a hierarchical assignment process iteratively.</p>
<p>Please keep in mind that the sample data is used for demonstration purposes only and has been simplified and reduced in size. It is solely intended for educational purposes on how to execute <code>cspot</code> and will not yeild any meaningful results.</p>
<div class="highlight"><pre><span></span><code><span class="o">%%</span><span class="n">time</span>
<span class="c1"># import packages</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>CPU times: user 3 ¬µs, sys: 1e+03 ns, total: 4 ¬µs
Wall time: 4.05 ¬µs
</code></pre></div>
<p><strong>We need <code>two</code> basic inputs to perform phenotyping with CSPOT</strong>
- The cspot Object
- A Phenotyping workflow based on prior knowledge</p>
<div class="highlight"><pre><span></span><code><span class="o">%%</span><span class="n">time</span>
<span class="c1"># Path to the CSPOT Object</span>
<span class="n">csObject</span> <span class="o">=</span> <span class="n">projectDir</span> <span class="o">+</span> <span class="s1">&#39;/CSPOT/csObject/exampleImage_cspotPredict.ome.h5ad&#39;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>CPU times: user 1e+03 ns, sys: 1e+03 ns, total: 2 ¬µs
Wall time: 4.29 ¬µs
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="o">%%</span><span class="n">time</span>
<span class="c1"># load the phenotyping workflow</span>
<span class="n">phenotype</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">projectDir</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;/phenotype_workflow.csv&#39;</span><span class="p">)</span>
<span class="c1"># view the table:</span>
<span class="n">phenotype</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">na_rep</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>CPU times: user 46.1 ms, sys: 2.16 ms, total: 48.3 ms
Wall time: 16.9 ms
</code></pre></div>
<style type="text/css">
</style>
<table id="T_22e70">
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_22e70_level0_col0" class="col_heading level0 col0" >Unnamed: 0</th>
      <th id="T_22e70_level0_col1" class="col_heading level0 col1" >Unnamed: 1</th>
      <th id="T_22e70_level0_col2" class="col_heading level0 col2" >ECAD</th>
      <th id="T_22e70_level0_col3" class="col_heading level0 col3" >CD45</th>
      <th id="T_22e70_level0_col4" class="col_heading level0 col4" >CD4</th>
      <th id="T_22e70_level0_col5" class="col_heading level0 col5" >CD3D</th>
      <th id="T_22e70_level0_col6" class="col_heading level0 col6" >CD8A</th>
      <th id="T_22e70_level0_col7" class="col_heading level0 col7" >KI67</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_22e70_level0_row0" class="row_heading level0 row0" >0</th>
      <td id="T_22e70_row0_col0" class="data row0 col0" >all</td>
      <td id="T_22e70_row0_col1" class="data row0 col1" >Immune</td>
      <td id="T_22e70_row0_col2" class="data row0 col2" ></td>
      <td id="T_22e70_row0_col3" class="data row0 col3" >anypos</td>
      <td id="T_22e70_row0_col4" class="data row0 col4" >anypos</td>
      <td id="T_22e70_row0_col5" class="data row0 col5" >anypos</td>
      <td id="T_22e70_row0_col6" class="data row0 col6" >anypos</td>
      <td id="T_22e70_row0_col7" class="data row0 col7" ></td>
    </tr>
    <tr>
      <th id="T_22e70_level0_row1" class="row_heading level0 row1" >1</th>
      <td id="T_22e70_row1_col0" class="data row1 col0" >all</td>
      <td id="T_22e70_row1_col1" class="data row1 col1" >ECAD+</td>
      <td id="T_22e70_row1_col2" class="data row1 col2" >pos</td>
      <td id="T_22e70_row1_col3" class="data row1 col3" ></td>
      <td id="T_22e70_row1_col4" class="data row1 col4" ></td>
      <td id="T_22e70_row1_col5" class="data row1 col5" ></td>
      <td id="T_22e70_row1_col6" class="data row1 col6" ></td>
      <td id="T_22e70_row1_col7" class="data row1 col7" ></td>
    </tr>
    <tr>
      <th id="T_22e70_level0_row2" class="row_heading level0 row2" >2</th>
      <td id="T_22e70_row2_col0" class="data row2 col0" >ECAD+</td>
      <td id="T_22e70_row2_col1" class="data row2 col1" >KI67+ ECAD+</td>
      <td id="T_22e70_row2_col2" class="data row2 col2" ></td>
      <td id="T_22e70_row2_col3" class="data row2 col3" ></td>
      <td id="T_22e70_row2_col4" class="data row2 col4" ></td>
      <td id="T_22e70_row2_col5" class="data row2 col5" ></td>
      <td id="T_22e70_row2_col6" class="data row2 col6" ></td>
      <td id="T_22e70_row2_col7" class="data row2 col7" >pos</td>
    </tr>
    <tr>
      <th id="T_22e70_level0_row3" class="row_heading level0 row3" >3</th>
      <td id="T_22e70_row3_col0" class="data row3 col0" >Immune</td>
      <td id="T_22e70_row3_col1" class="data row3 col1" >CD4+ T</td>
      <td id="T_22e70_row3_col2" class="data row3 col2" ></td>
      <td id="T_22e70_row3_col3" class="data row3 col3" ></td>
      <td id="T_22e70_row3_col4" class="data row3 col4" >allpos</td>
      <td id="T_22e70_row3_col5" class="data row3 col5" >allpos</td>
      <td id="T_22e70_row3_col6" class="data row3 col6" ></td>
      <td id="T_22e70_row3_col7" class="data row3 col7" ></td>
    </tr>
    <tr>
      <th id="T_22e70_level0_row4" class="row_heading level0 row4" >4</th>
      <td id="T_22e70_row4_col0" class="data row4 col0" >Immune</td>
      <td id="T_22e70_row4_col1" class="data row4 col1" >CD8+ T</td>
      <td id="T_22e70_row4_col2" class="data row4 col2" ></td>
      <td id="T_22e70_row4_col3" class="data row4 col3" ></td>
      <td id="T_22e70_row4_col4" class="data row4 col4" ></td>
      <td id="T_22e70_row4_col5" class="data row4 col5" >allpos</td>
      <td id="T_22e70_row4_col6" class="data row4 col6" >allpos</td>
      <td id="T_22e70_row4_col7" class="data row4 col7" ></td>
    </tr>
    <tr>
      <th id="T_22e70_level0_row5" class="row_heading level0 row5" >5</th>
      <td id="T_22e70_row5_col0" class="data row5 col0" >Immune</td>
      <td id="T_22e70_row5_col1" class="data row5 col1" >Non T CD4+ cells</td>
      <td id="T_22e70_row5_col2" class="data row5 col2" ></td>
      <td id="T_22e70_row5_col3" class="data row5 col3" ></td>
      <td id="T_22e70_row5_col4" class="data row5 col4" >pos</td>
      <td id="T_22e70_row5_col5" class="data row5 col5" >neg</td>
      <td id="T_22e70_row5_col6" class="data row5 col6" ></td>
      <td id="T_22e70_row5_col7" class="data row5 col7" ></td>
    </tr>
  </tbody>
</table>

<p>As it can be seen from the table above,<br />
(1) The <code>first column</code> has to contain the cell that are to be classified.<br />
(2) The <code>second column</code> indicates the phenotype a particular cell will be assigned if it satifies the conditions in the row.<br />
(3) <code>Column three</code> and onward represent protein markers. If the protein marker is known to be expressed for that cell type, then it is denoted by either <code>pos</code>, <code>allpos</code>. If the protein marker is known to not express for a cell type it can be denoted by <code>neg</code>, <code>allneg</code>. If the protein marker is irrelevant or uncertain to express for a cell type, then it is left empty. <code>anypos</code> and <code>anyneg</code> are options for using a set of markers and if any of the marker is positive or negative, the cell type is denoted accordingly.</p>
<p><strong>To give users maximum flexibility in identifying desired cell types, we have implemented various classification arguments as described above for strategical classification. They include</strong></p>
<ul>
<li>allpos</li>
<li>allneg</li>
<li>anypos</li>
<li>anyneg</li>
<li>pos</li>
<li>neg</li>
</ul>
<p><code>pos</code> : "Pos" looks for cells positive for a given marker. If multiple markers are annotated as <code>pos</code>, all must be positive to denote the cell type. For example, a Regulatory T cell can be defined as <code>CD3+CD4+FOXP3+</code> by passing <code>pos</code> to each marker. If one or more markers don't meet the criteria (e.g. CD4-), the program will classify it as <code>Likely-Regulatory-T cell</code>, pending user confirmation. This is useful in cases of technical artifacts or when cell types (such as cancer cells) are defined by marker loss (e.g. T-cell Lymphomas).</p>
<p><code>neg</code> : Same as <code>pos</code> but looks for negativity of the defined markers. </p>
<p><code>allpos</code> : "Allpos" requires all defined markers to be positive. Unlike <code>pos</code>, it doesn't classify cells as <code>Likely-cellType</code>, but strictly annotates cells positive for all defined markers.</p>
<p><code>allneg</code> : Same as <code>allpos</code> but looks for negativity of the defined markers. </p>
<p><code>anypos</code> : "Anypos" requires only one of the defined markers to be positive. For example, to define macrophages, a cell could be designated as such if any of <code>CD68</code>, <code>CD163</code>, or <code>CD206</code> is positive.</p>
<p><code>anyneg</code> : Same as <code>anyneg</code> but looks for negativity of the defined markers. </p>
<div class="highlight"><pre><span></span><code><span class="o">%%</span><span class="n">time</span>
<span class="n">adata</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">csPhenotype</span> <span class="p">(</span> <span class="n">csObject</span><span class="o">=</span><span class="n">csObject</span><span class="p">,</span>
                            <span class="n">phenotype</span><span class="o">=</span><span class="n">phenotype</span><span class="p">,</span>
                            <span class="n">midpoint</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
                            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;phenotype&quot;</span><span class="p">,</span>
                            <span class="n">imageid</span><span class="o">=</span><span class="s1">&#39;imageid&#39;</span><span class="p">,</span>
                            <span class="n">pheno_threshold_percent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">pheno_threshold_abs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">fileName</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">projectDir</span><span class="o">=</span><span class="n">projectDir</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Phenotyping Immune
Phenotyping ECAD+
-- Subsetting ECAD+
Phenotyping KI67+ ECAD+
-- Subsetting Immune
Phenotyping CD4+ T
Phenotyping CD8+ T
Phenotyping Non T CD4+ cells
Consolidating the phenotypes across all groups
Modified csObject is stored at &quot;/Users/aj/Downloads/cspotExampleData/CSPOT/csPhenotype
CPU times: user 243 ms, sys: 9.24 ms, total: 252 ms
Wall time: 91.9 ms


/Users/aj/miniconda3/envs/cspot/lib/python3.9/site-packages/cspot/csPhenotype.py:261: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  allpos_score[&#39;score&#39;] = allpos_score.max(axis=1)
/Users/aj/miniconda3/envs/cspot/lib/python3.9/site-packages/cspot/csPhenotype.py:261: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  allpos_score[&#39;score&#39;] = allpos_score.max(axis=1)
</code></pre></div>
<p><strong>If you had provided <code>projectDir</code> the modified csObject would be stored in <code>CSPOT/csPhenotype/</code>, else, the object will be returned to memory.</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">%%</span><span class="n">time</span>
<span class="c1"># check the identified phenotypes</span>
<span class="n">adata</span><span class="o">.</span><span class="n">obs</span><span class="p">[</span><span class="s1">&#39;phenotype&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>CPU times: user 3.43 ms, sys: 513 ¬µs, total: 3.95 ms
Wall time: 907 ¬µs





KI67+ ECAD+    6159
CD4+ T         5785
CD8+ T          816
Name: phenotype, dtype: int64
</code></pre></div>
<div class="highlight"><pre><span></span><code>
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 | Nirmal Lab | www.nirmallab.com
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://twitter.com/nirmallab" target="_blank" rel="noopener" title="Twitter" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.top", "search.highlight"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>